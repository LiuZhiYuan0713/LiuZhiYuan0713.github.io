<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <!-- Open Graph Data -->
  <meta property="og:title" content="跨域资源共享 CORS 详解"/>
  <meta property="og:description" content="" />
  <meta property="og:site_name" content="刘致远的博客"/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://yoursite.comundefined"/>
  
    <link rel="alternate" href="/atom.xml" title="刘致远的博客" type="application/atom+xml">
  
  
    <link rel="icon" type="image/x-icon" href="/bitbug_favicon.ico">
  

  <!-- Site Title -->
  <title>刘致远的博客</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/css/style.light.css">

  <!-- Google Analytics -->
  
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'true', 'auto');
        ga('send', 'pageview');
    </script>


</head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/images/123.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">跨域资源共享 CORS 详解</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/">
                  
                  Home
                  
                </a>
              </li>
            
              <li>
                <a href="/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/LiuZhiYuan0713">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="mailto:1129529309@qq.com">
                  
                  Email
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>


<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By John Doe</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2017-06-02</span>
            <span class="time">15:34:54</span>
          </span>
          
          <!--  Categories  -->
            <span class="categories info">Under 

<a href="/categories/Java/">Java</a>
</span>
          
        </div>
        <!-- Tags -->
        
          <div class="post-tags text-muted">
            Tags: 

<a class="tag" href="/tags/spring-mvc/">#spring mvc</a> <a class="tag" href="/tags/cors/">#cors</a>


          </div>
        
        <!-- Post Main Content -->
        <div class="post-content">
          <p>CORS是一个W3C标准，全称是”跨域资源共享”（Cross-origin resource sharing）。<br>它允许浏览器向跨源服务器，发出XMLHttpRequest请求，从而克服了AJAX只能同源使用的限制。<br>本文详细介绍CORS的内部机制。<br><a id="more"></a></p>
<html xmlns="http://www.w3.org/1999/xhtml" id="sixapart-standard"><br><head><br>    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><br><meta name="generator" content="Movable Type  5.2.2"><br><meta name="viewport" content="width=device-width, initial-scale=1"><br><link rel="stylesheet" href="http://www.ruanyifeng.com/blog/styles.css" type="text/css"><br><link rel="start" href="http://www.ruanyifeng.com/blog/" title="Home"><br><link rel="alternate" type="application/atom+xml" title="Recent Entries" href="http://feeds.feedburner.com/ruanyifeng"><br><script type="text/javascript" src="http://www.ruanyifeng.com/blog/mt.js"></script><br><!--
<rdf:RDF xmlns="http://web.resource.org/cc/"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
<Work rdf:about="http://www.ruanyifeng.com/blog/2007/01/guestbook.html">
<dc:title>卡尔维诺中文站留言板</dc:title>
<dc:description>这个帖子专门用作卡尔维诺中文站的留言板，欢迎大家留言和提问。...</dc:description>
<dc:creator>阮一峰</dc:creator>
<dc:date>2007-01-04T18:54:26+08:00</dc:date>
<license rdf:resource="http://creativecommons.org/licenses/by-nc-nd/3.0/" />
</Work>
<License rdf:about="http://creativecommons.org/licenses/by-nc-nd/3.0/">
</License>
</rdf:RDF>
--><br><br><br><br>    <link rel="prev" href="http://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html" title="浏览器同源政策及其规避方法"><br>    <link rel="next" href="http://www.ruanyifeng.com/blog/2016/04/you-and-your-research.html" title="理查德·汉明《你和你的研究》"><br><br>    <title>跨域资源共享 CORS 详解 - 阮一峰的网络日志</title><br></head><br><body id="scrapbook" class="mt-entry-archive one-column"><br><script><br>if (/mobile/i.test(navigator.userAgent) || /android/i.test(navigator.userAgent)) document.body.classList.add(‘mobile’);<br><br>window.addEventListener(‘load’, function(event) {<br>  setTimeout(function () {<br>    hab(‘#sup-post-2’);<br>    hab(‘#gd1-inner’);<br>  }, 1000);<br>});<br></script><br><br><br><br><br><br><br><br><br><br><br>                                <div class="asset-content entry-content" id="main-content"><br><br>                                    <!-- div class="asset-body" --><br>                                        <p>CORS是一个W3C标准，全称是”跨域资源共享”（Cross-origin resource sharing）。</p><br><br>                                    <!-- /div --><br><br><br>                                    <!-- div id="more" class="asset-more" --><br>                                        <p>它允许浏览器向跨源服务器，发出<a href="http://www.ruanyifeng.com/blog/2012/09/xmlhttprequest_level_2.html" target="_blank" rel="external"><code>XMLHttpRequest</code></a>请求，从而克服了AJAX只能<a href="http://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html" target="_blank" rel="external">同源</a>使用的限制。</p><br><br><p>本文详细介绍CORS的内部机制。</p><br><br><p><img src="http://www.ruanyifeng.com/blogimg/asset/2016/bg2016041202.jpg" alt="" title=""></p><br><br><p>（图片说明：摄于阿联酋艾因（Al Ain）的绿洲公园）</p><br><br><h2>一、简介</h2><br><br><p>CORS需要浏览器和服务器同时支持。目前，所有浏览器都支持该功能，IE浏览器不能低于IE10。</p><br><br><p>整个CORS通信过程，都是浏览器自动完成，不需要用户参与。对于开发者来说，CORS通信与同源的AJAX通信没有差别，代码完全一样。浏览器一旦发现AJAX请求跨源，就会自动添加一些附加的头信息，有时还会多出一次附加的请求，但用户不会有感觉。</p><br><br><p>因此，实现CORS通信的关键是服务器。只要服务器实现了CORS接口，就可以跨源通信。</p><br><br><h2>二、两种请求</h2><br><br><p>浏览器将CORS请求分成两类：简单请求（simple request）和非简单请求（not-so-simple request）。</p><br><br><p>只要同时满足以下两大条件，就属于简单请求。</p><br><br><blockquote><br>  <p>（1) 请求方法是以下三种方法之一：</p><br><br><ul><br><li>HEAD</li><br><li>GET</li><br><li>POST</li><br></ul><br><br><p>（2）HTTP的头信息不超出以下几种字段：</p><br><br><ul><br><li>Accept</li><br><li>Accept-Language</li><br><li>Content-Language</li><br><li>Last-Event-ID</li><br><li>Content-Type：只限于三个值<code>application/x-www-form-urlencoded</code>、<code>multipart/form-data</code>、<code>text/plain</code></li><br></ul><br></blockquote><br><br><p>凡是不同时满足上面两个条件，就属于非简单请求。</p><br><br><p>浏览器对这两种请求的处理，是不一样的。</p><br><br><h2>三、简单请求</h2><br><br><h3>3.1 基本流程</h3><br><br><p>对于简单请求，浏览器直接发出CORS请求。具体来说，就是在头信息之中，增加一个<code>Origin</code>字段。</p><br><br><p>下面是一个例子，浏览器发现这次跨源AJAX请求是简单请求，就自动在头信息之中，添加一个<code>Origin</code>字段。</p><br><br><blockquote><pre><code class="language-http"><br>GET /cors HTTP/1.1<br>Origin: <a href="http://api.bob.com" target="_blank" rel="external">http://api.bob.com</a><br>Host: api.alice.com<br>Accept-Language: en-US<br>Connection: keep-alive<br>User-Agent: Mozilla/5.0…<br></code></pre></blockquote><br><br><p>上面的头信息中，<code>Origin</code>字段用来说明，本次请求来自哪个源（协议 + 域名 + 端口）。服务器根据这个值，决定是否同意这次请求。</p><br><br><p>如果<code>Origin</code>指定的源，不在许可范围内，服务器会返回一个正常的HTTP回应。浏览器发现，这个回应的头信息没有包含<code>Access-Control-Allow-Origin</code>字段（详见下文），就知道出错了，从而抛出一个错误，被<code>XMLHttpRequest</code>的<code>onerror</code>回调函数捕获。注意，这种错误无法通过状态码识别，因为HTTP回应的状态码有可能是200。</p><br><br><p>如果<code>Origin</code>指定的域名在许可范围内，服务器返回的响应，会多出几个头信息字段。</p><br><br><blockquote><pre><code class="language-http"><br>Access-Control-Allow-Origin: <a href="http://api.bob.com" target="_blank" rel="external">http://api.bob.com</a><br>Access-Control-Allow-Credentials: true<br>Access-Control-Expose-Headers: FooBar<br>Content-Type: text/html; charset=utf-8<br></code></pre></blockquote><br><br><p>上面的头信息之中，有三个与CORS请求相关的字段，都以<code>Access-Control-</code>开头。</p><br><br><p><strong>（1）Access-Control-Allow-Origin</strong></p><br><br><p>该字段是必须的。它的值要么是请求时<code>Origin</code>字段的值，要么是一个<code><em></em></code>，表示接受任意域名的请求。</p><br><br><p><strong>（2）Access-Control-Allow-Credentials</strong></p><br><br><p>该字段可选。它的值是一个布尔值，表示是否允许发送Cookie。默认情况下，Cookie不包括在CORS请求之中。设为<code>true</code>，即表示服务器明确许可，Cookie可以包含在请求中，一起发给服务器。这个值也只能设为<code>true</code>，如果服务器不要浏览器发送Cookie，删除该字段即可。</p><br><br><p><strong>（3）Access-Control-Expose-Headers</strong></p><br><br><p>该字段可选。CORS请求时，<code>XMLHttpRequest</code>对象的<code>getResponseHeader()</code>方法只能拿到6个基本字段：<code>Cache-Control</code>、<code>Content-Language</code>、<code>Content-Type</code>、<code>Expires</code>、<code>Last-Modified</code>、<code>Pragma</code>。如果想拿到其他字段，就必须在<code>Access-Control-Expose-Headers</code>里面指定。上面的例子指定，<code>getResponseHeader(‘FooBar’)</code>可以返回<code>FooBar</code>字段的值。</p><br><br><h3>3.2 withCredentials 属性</h3><br><br><p>上面说到，CORS请求默认不发送Cookie和HTTP认证信息。如果要把Cookie发到服务器，一方面要服务器同意，指定<code>Access-Control-Allow-Credentials</code>字段。</p><br><br><blockquote><pre><code class="language-http"><br>Access-Control-Allow-Credentials: true<br></code></pre></blockquote><br><br><p>另一方面，开发者必须在AJAX请求中打开<code>withCredentials</code>属性。</p><br><br><blockquote><pre><code class="language-javascript"><br>var xhr = new XMLHttpRequest();<br>xhr.withCredentials = true;<br></code></pre></blockquote><br><br><p>否则，即使服务器同意发送Cookie，浏览器也不会发送。或者，服务器要求设置Cookie，浏览器也不会处理。</p><br><br><p>但是，如果省略<code>withCredentials</code>设置，有的浏览器还是会一起发送Cookie。这时，可以显式关闭<code>withCredentials</code>。</p><br><br><blockquote><pre><code class="language-javascript"><br>xhr.withCredentials = false;<br></code></pre></blockquote><br><br><p>需要注意的是，如果要发送Cookie，<code>Access-Control-Allow-Origin</code>就不能设为星号，必须指定明确的、与请求网页一致的域名。同时，Cookie依然遵循同源政策，只有用服务器域名设置的Cookie才会上传，其他域名的Cookie并不会上传，且（跨源）原网页代码中的<code>document.cookie</code>也无法读取服务器域名下的Cookie。</p><br><br><h2>四、非简单请求</h2><br><br><h3>4.1 预检请求</h3><br><br><p>非简单请求是那种对服务器有特殊要求的请求，比如请求方法是<code>PUT</code>或<code>DELETE</code>，或者<code>Content-Type</code>字段的类型是<code>application/json</code>。</p><br><br><p>非简单请求的CORS请求，会在正式通信之前，增加一次HTTP查询请求，称为”预检”请求（preflight）。</p><br><br><p>浏览器先询问服务器，当前网页所在的域名是否在服务器的许可名单之中，以及可以使用哪些HTTP动词和头信息字段。只有得到肯定答复，浏览器才会发出正式的<code>XMLHttpRequest</code>请求，否则就报错。</p><br><br><p>下面是一段浏览器的JavaScript脚本。</p><br><br><blockquote><pre><code class="language-javascript"><br>var url = ‘<a href="http://api.alice.com/cors" target="_blank" rel="external">http://api.alice.com/cors</a>‘;<br>var xhr = new XMLHttpRequest();<br>xhr.open(‘PUT’, url, true);<br>xhr.setRequestHeader(‘X-Custom-Header’, ‘value’);<br>xhr.send();<br></code></pre></blockquote><br><br><p>上面代码中，HTTP请求的方法是<code>PUT</code>，并且发送一个自定义头信息<code>X-Custom-Header</code>。</p><br><br><p>浏览器发现，这是一个非简单请求，就自动发出一个”预检”请求，要求服务器确认可以这样请求。下面是这个”预检”请求的HTTP头信息。</p><br><br><blockquote><pre><code class="language-http"><br>OPTIONS /cors HTTP/1.1<br>Origin: <a href="http://api.bob.com" target="_blank" rel="external">http://api.bob.com</a><br>Access-Control-Request-Method: PUT<br>Access-Control-Request-Headers: X-Custom-Header<br>Host: api.alice.com<br>Accept-Language: en-US<br>Connection: keep-alive<br>User-Agent: Mozilla/5.0…<br></code></pre></blockquote><br><br><p>“预检”请求用的请求方法是<code>OPTIONS</code>，表示这个请求是用来询问的。头信息里面，关键字段是<code>Origin</code>，表示请求来自哪个源。</p><br><br><p>除了<code>Origin</code>字段，”预检”请求的头信息包括两个特殊字段。</p><br><br><p><strong>（1）Access-Control-Request-Method</strong></p><br><br><p>该字段是必须的，用来列出浏览器的CORS请求会用到哪些HTTP方法，上例是<code>PUT</code>。</p><br><br><p><strong>（2）Access-Control-Request-Headers</strong></p><br><br><p>该字段是一个逗号分隔的字符串，指定浏览器CORS请求会额外发送的头信息字段，上例是<code>X-Custom-Header</code>。</p><br><br><h3>4.2 预检请求的回应</h3><br><br><p>服务器收到”预检”请求以后，检查了<code>Origin</code>、<code>Access-Control-Request-Method</code>和<code>Access-Control-Request-Headers</code>字段以后，确认允许跨源请求，就可以做出回应。</p><br><br><blockquote><pre><code class="language-http"><br>HTTP/1.1 200 OK<br>Date: Mon, 01 Dec 2008 01:15:39 GMT<br>Server: Apache/2.0.61 (Unix)<br>Access-Control-Allow-Origin: <a href="http://api.bob.com" target="_blank" rel="external">http://api.bob.com</a><br>Access-Control-Allow-Methods: GET, POST, PUT<br>Access-Control-Allow-Headers: X-Custom-Header<br>Content-Type: text/html; charset=utf-8<br>Content-Encoding: gzip<br>Content-Length: 0<br>Keep-Alive: timeout=2, max=100<br>Connection: Keep-Alive<br>Content-Type: text/plain<br></code></pre></blockquote><br><br><p>上面的HTTP回应中，关键的是<code>Access-Control-Allow-Origin</code>字段，表示<code><a href="http://api.bob.com" target="_blank" rel="external">http://api.bob.com</a></code>可以请求数据。该字段也可以设为星号，表示同意任意跨源请求。</p><br><br><blockquote><pre><code class="language-http"><br>Access-Control-Allow-Origin: <br></code></pre></blockquote><br><br><p>如果浏览器否定了”预检”请求，会返回一个正常的HTTP回应，但是没有任何CORS相关的头信息字段。这时，浏览器就会认定，服务器不同意预检请求，因此触发一个错误，被<code>XMLHttpRequest</code>对象的<code>onerror</code>回调函数捕获。控制台会打印出如下的报错信息。</p><br><br><blockquote><pre><code class="language-bash"><br>XMLHttpRequest cannot load <a href="http://api.alice.com" target="_blank" rel="external">http://api.alice.com</a>.<br>Origin <a href="http://api.bob.com" target="_blank" rel="external">http://api.bob.com</a> is not allowed by Access-Control-Allow-Origin.<br></code></pre></blockquote><br><br><p>服务器回应的其他CORS相关字段如下。</p><br><br><blockquote><pre><code class="language-http"><br>Access-Control-Allow-Methods: GET, POST, PUT<br>Access-Control-Allow-Headers: X-Custom-Header<br>Access-Control-Allow-Credentials: true<br>Access-Control-Max-Age: 1728000<br></code></pre></blockquote><br><br><p><strong>（1）Access-Control-Allow-Methods</strong></p><br><br><p>该字段必需，它的值是逗号分隔的一个字符串，表明服务器支持的所有跨域请求的方法。注意，返回的是所有支持的方法，而不单是浏览器请求的那个方法。这是为了避免多次”预检”请求。</p><br><br><p><strong>（2）Access-Control-Allow-Headers</strong></p><br><br><p>如果浏览器请求包括<code>Access-Control-Request-Headers</code>字段，则<code>Access-Control-Allow-Headers</code>字段是必需的。它也是一个逗号分隔的字符串，表明服务器支持的所有头信息字段，不限于浏览器在”预检”中请求的字段。</p><br><br><p><strong>（3）Access-Control-Allow-Credentials</strong></p><br><br><p>该字段与简单请求时的含义相同。</p><br><br><p><strong>（4）Access-Control-Max-Age</strong></p><br><br><p>该字段可选，用来指定本次预检请求的有效期，单位为秒。上面结果中，有效期是20天（1728000秒），即允许缓存该条回应1728000秒（即20天），在此期间，不用发出另一条预检请求。</p><br><br><h3>4.3 浏览器的正常请求和回应</h3><br><br><p>一旦服务器通过了”预检”请求，以后每次浏览器正常的CORS请求，就都跟简单请求一样，会有一个<code>Origin</code>头信息字段。服务器的回应，也都会有一个<code>Access-Control-Allow-Origin</code>头信息字段。</p><br><br><p>下面是”预检”请求之后，浏览器的正常CORS请求。</p><br><br><blockquote><pre><code class="language-http"><br>PUT /cors HTTP/1.1<br>Origin: <a href="http://api.bob.com" target="_blank" rel="external">http://api.bob.com</a><br>Host: api.alice.com<br>X-Custom-Header: value<br>Accept-Language: en-US<br>Connection: keep-alive<br>User-Agent: Mozilla/5.0…<br></code></pre></blockquote><br><br><p>上面头信息的<code>Origin</code>字段是浏览器自动添加的。</p><br><br><p>下面是服务器正常的回应。</p><br><br><blockquote><pre><code class="language-http"><br>Access-Control-Allow-Origin: <a href="http://api.bob.com" target="_blank" rel="external">http://api.bob.com</a><br>Content-Type: text/html; charset=utf-8<br></code></pre></blockquote><br><br><p>上面头信息中，<code>Access-Control-Allow-Origin</code>字段是每次回应都必定包含的。</p><br><br><h2>五、与JSONP的比较</h2><br><br><p>CORS与JSONP的使用目的相同，但是比JSONP更强大。</p><br><br><p>JSONP只支持<code>GET</code>请求，CORS支持所有类型的HTTP请求。JSONP的优势在于支持老式浏览器，以及可以向不支持CORS的网站请求数据。</p><br><br><p>（完）</p><br><br>                                    <!-- /div --><br><br>                                </div><br>    <script type="text/javascript" src="/newwindow.js"></script><br>                                <div class="asset-footer"><br><br><h3>文档信息</h3><br><ul><br><li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="external">创意共享3.0许可证</a>）</li><br><li>发表日期： <abbr class="published" title="2016-04-12T06:56:35+08:00">2016年4月12日</abbr></li><br><li>更多内容： <a href="http://www.ruanyifeng.com/blog/archives.html" target="_blank"> 档案</a>  »<br><a href="http://www.ruanyifeng.com/blog/javascript/" target="_blank" rel="external"> JavaScript</a><br></li><br><li>博客文集：<a href="http://road.ruanyifeng.com" target="_blank">《前方的路》</a>，<a href="https://ruanyf.github.io/survivor" target="_blank">《未来世界的幸存者》</a></li><br><li>社交媒体：<a href="https://twitter.com/ruanyf" target="_blank"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAk1JREFUeNqsVc9rE0EU/mZ3dhPNJl2bVIk/Km09aFBE8GLvnrwJXvwLxIsgCP4Fnit6E8Gb0IMHwUsL9SSNgiAoooJIpE1Joo1h82uT7IxvxmRN3Q32kAdvdrI773vfe+/bDTu9WioDcDAda3Ja8piepQ1avCkCeny0Y+R9KenKwOmHHLvPaKn7AtVOoO8dOWDCMpg+41gMQv5FNEJACgoE8MsPNLDBhgfoutMOsJDmWLmU037C4TApciljwQ/kHoohQxV06+wMXNvE7WINuaSpvdYVKLgWnl3O4zAxU3Z1IYVGT+B5qYWV9z2kbQaT/cOwTsxOUUYF+mB5Dkmi8HG3h2q9hxsFNwRTdvQgxxnXRrMvIdkEhllis/qtiWuLDm4WZnBlPoWnXz28LHdw0uGR7m9Wu3j0qYGEubfn4UlBfXO4gTZltRNMg9w9f0i7kNFxllsBlS0x75gYfxyWTBUjT2W5CSMSPBrQuG21+hiMDS8CeCzF8eSLp13uQ3Ab1IqMFZN8tFHPmgOBF99bYP8Be1Xp6t7OJszJgKpPSiZvaj7uf2hguz2IBQuozDvFH6RDBjuK9wdQDvt0nMpW+8efGyh5UcAeZb2+UcHbnz5Jx4wdlp4yJYU3kLiQtfBwOYeLc8nIwfXtNu69q2Oz4mMxbemYOOOjKarhvq51KUjg3GwiFPIuvcNF6pnSnWK0lOEabNLgQh1aJFAhlGB9rG110B2+oyRNPc0sZbRNFltmLKDKqj4Qrm1ojzOxDz2pyPQ0P7CK4c40/wJ+CzAAGYrXsvfFXR4AAAAASUVORK5CYII=" style="border:0;"> twitter</a>，<a href="http://weibo.com/ruanyf" target="_blank"><img src="data:image/png;base64,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" style="border:0;"> weibo</a></li><br><li>Feed订阅： <a href="/feed.html" target="_blank"><img src="data:image/gif;base64,R0lGODlhFAAUANU2APV1GfmrePZ8IeR5VPq2ieNkLf7p3NpFJveCJ/NoFfibVPR1IexiJfvdzuZrNfXGuOhUEueTevaFOfzIpNxDGeZZJNU6IOubifiVTfOnid1aLuZpLOFSJf/28vJtIvGcefaLSd5kNu9iFv/z6//48//t4uFfLfNkCeJNGuGNc/rCof/+/PVxEeldI/V5KeKMbu9nIvB2OvzQtNxMKfOPXP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADYALAAAAAAUABQAAAb/QJstEjKZCsjCZsl0pIS2QWXaYsA8noVWIEAgFoNhhWNyMESi7Jbr/aZCFdRnZJAFJCwAt+vlOkwtEBk1hDUkExJ6bQJaGyYMLTQTDSOFHQF8jAseSFYiJwkuAQ2FE1xaHjBIMDAgARguJwABJIQTLJswDEgeIgSEJQQILAqVNQEiui1HHgkBhTUGCiwYtR0xLS0VJhtaEgoEBoQkGCfPNSoQY9xaCwAsCBPALgmkJA4cZN0CAAgY/PJqEIDwgVAECjM0bOAnwcAKGQJclKhRgoGDDjUeUDigkN8vQiBOfByAglSDAxw3IBCgYEU0FyJoEPpA4UGNDjMsaHDQR8EdPVYOMmQYQGHAhQgHLIRIsWAlgASsGMRBMWMGBQtYZ7yIsoBRKkhjOMxAiXJGGCEpHGxIYsSIhrcaQmy1EQQAOw==" style="border:0;"></a></li><br><br></ul><br>                                </div><br><br>                            <br><br>                        <div id="sup-post-2" style="display: inline-block ! important;width: 100%;"><br>   <p style="text-align:center;"><a href="http://www.zhufengpeixun.cn/jscourse/new/js/index.html?ref=ruanyifeng.com" target="_blank"><img alt="珠峰培训" src="http://www.ruanyifeng.com/blog/images/sup_zhufeng_page.png" style="border:none;"></a></p><br>   <p style="text-align:center;"><a href="https://cn.udacity.com/ruanyfbanner/" title="优达学城" target="_blank"><image alt="优达学城" src="https://s3.cn-north-1.amazonaws.com.cn/static-documents/marketing/uda_banner_ryf.jpg" style="border:none;display: block !important;"></image></a><br></p><br>  </div><br><br><div id="related_entries"><br><h2>相关文章</h2><br><ul><br><br><li><strong>2017.04.16: <a href="http://www.ruanyifeng.com/blog/2017/04/memory-leak.html" target="_blank" rel="external">JavaScript 内存泄漏教程</a></strong><br><br>                           <div class="entry-body"><br>                              一、什么是内存泄漏？<br><br>程序的运行需要内存。只要程序提出要求，操作系统或者运行时（runtime）就必须供给内存。<br><br>                           </div><br><br></li><br><br><br><li><strong>2017.03.18: <a href="http://www.ruanyifeng.com/blog/2017/03/reduce_transduce.html" target="_blank" rel="external">Reduce 和 Transduce 的含义</a></strong><br><br>                           <div class="entry-body"><br>                              学习函数式编程，必须掌握很多术语，否则根本看不懂文档。<br><br>                           </div><br><br></li><br><br><br><li><strong>2017.03.13: <a href="http://www.ruanyifeng.com/blog/2017/03/pointfree.html" target="_blank" rel="external">Pointfree 编程风格指南</a></strong><br><br>                           <div class="entry-body"><br>                              本文要回答一个很重要的问题：函数式编程有什么用？<br><br>                           </div><br><br></li><br><br><br><li><strong>2017.03.09: <a href="http://www.ruanyifeng.com/blog/2017/03/ramda.html" target="_blank" rel="external">Ramda 函数库参考教程</a></strong><br><br>                           <div class="entry-body"><br>                              学习函数式编程的过程中，我接触到了 Ramda.js。<br><br>                           </div><br><br></li><br><br><br></ul><br></div><br><br><br><div id="gd1" style="display: block !important;"><br><h2>广告<a href="/support.html">（购买广告位）</a></h2><br><div id="gd1-inner"><br><div id="gd1-left"><br><a href="http://www.miaov.com/?utm_source=ruanyifeng&" alt="妙味课堂" target="_blank"><image alt="妙味课堂" src="http://www.ruanyifeng.com/blog/images/sup_miaov_201703.jpg" style="border:none;display: block !important;"></image></a><br><br><br><a href="https://fundebug.com/?utm_source=ruanyifeng" title="FunDebug" target="_blank"><image alt="FunDebug" src="https://og6593g2z.qnssl.com/fundebug_js_promotion.jpeg" style="border:none;display: block !important;"></image></a><br></div><br><div id="gd1-right"><br><a href="http://apeclass.cn/1212/index.html?utm_source=ruanyifeng" title="海棠学院" target="_blank"><image alt="海棠学院" src="http://www.ruanyifeng.com/blog/images/sup_apeclass_300.png" style="border:none;display: block !important;"></image></a><br><br><br><a title="BitTiger" href="https://www.bittiger.io/home?utm_source=ruanyifeng&utm_medium=ruanyifeng&utm_content=ruanyifenggeneral" target="_blank"><image alt="BitTiger" src="http://www.ruanyifeng.com/blog/images/sup_bittiger_3.jpg" style="border:none;"></image></a><br><br></div><br></div><br></div><br><br><br>                    <div id="comments" class="comments"><br><br><br><br><br><br>    <h2 class="comments-header">留言（64条）</h2><br><br>    <div id="comments-content" class="comments-content" style="clear: left;"><br><br>        <div id="comment-355561" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">Se7en</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355561"><br>            <p>阮老师讲得非常全面透彻，看完这篇文章就会对浏览器的同源策略和跨域请求了解清楚了，堪称经典。</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 12, 2016  7:11 AM">2016年4月12日 07:11</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355561" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用Se7en的这条留言" onclick="return CommentQuote('comment-quote-355561','Se7en');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-355563" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">杨铮</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355563"><br>            <p>asp.net web api 中的坑。<br><br>web.config 中 remove name=”OPTIONSVerbHandler” 需要去掉。</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 12, 2016  8:38 AM">2016年4月12日 08:38</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355563" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用杨铮的这条留言" onclick="return CommentQuote('comment-quote-355563','杨铮');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-355567" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author"><a title="http://www.graysheep.me" href="http://www.graysheep.me" target="_blank" rel="nofollow">光君</a></span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355567"><br>            <p>可以可以，老师这篇文章很关键。但是想多问一句CORS在哪些场景下应用比较多？</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 12, 2016  9:33 AM">2016年4月12日 09:33</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355567" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用光君的这条留言" onclick="return CommentQuote('comment-quote-355567','光君');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-355568" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author"><a title="http://lxxyx.win" href="http://lxxyx.win" target="_blank" rel="nofollow">Lxxyx</a></span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355568"><br>            <p>正在最近在纠结跨域请求的相关问题，而已有资料的质量良莠不齐，阮一峰老师的两篇博文真的超级赞。</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 12, 2016  9:55 AM">2016年4月12日 09:55</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355568" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用Lxxyx的这条留言" onclick="return CommentQuote('comment-quote-355568','Lxxyx');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-355591" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">Junyi</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355591"><br>            <p>Access-Control-Allow-Origin支持多域名：<a href="http://junyi.me/blog/s17.html" target="_blank" rel="external">http://junyi.me/blog/s17.html</a></p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 12, 2016  7:44 PM">2016年4月12日 19:44</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355591" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用Junyi的这条留言" onclick="return CommentQuote('comment-quote-355591','Junyi');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-355606" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">四喜</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355606"><br>            <p>文中提到“CORS请求默认不发送Cookie”，通过服务端响应 Access-Control-Allow-Credentials: true 来控制。但如果接口依赖Cookie来完成一些处理（比如登录态），那第一次发送CORS请求“默认不发送Cookie”的话，服务端接受不到Cookie，岂不会有问题？</p><br><br><p>从实验上来看，Access-Control-Allow-Credentials: true 好像并没有控制Cookie是否发送，因为即使之前没有任何CORS请求（自然也没有往客户端发送该Header），第一次CORS请求也会带上所有该域能访问的Cookie。</p><br><br><p>测试环境：Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.110 Safari/537.36</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 13, 2016 10:17 AM">2016年4月13日 10:17</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355606" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用四喜的这条留言" onclick="return CommentQuote('comment-quote-355606','四喜');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-355609" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">阮一峰</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355609"><br>            <p>@四喜，</p><br><br><p>我试了一下，如果设为 withCredentials = false ，就不会发送 Cookie 了。如果省略这一行，确实会发送。但 MDN 明确说，默认值是 false。<a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/withCredentials" target="_blank" rel="external">https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/withCredentials</a></p><br><br><p>我原来的说法表达得不确切，我改一下。</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 13, 2016 11:19 AM">2016年4月13日 11:19</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355609" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用阮一峰的这条留言" onclick="return CommentQuote('comment-quote-355609','阮一峰');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-355628" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author"><a title="http://waylau.com/" href="http://waylau.com/" target="_blank" rel="nofollow">waylau</a></span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355628"><br>            <p>Access-Control-Allow-Origin 字段，如何表示允许一个以上的网站访问(不是<em>这种全部)，比如 允许 <a href="http://api.bob.com、" rel="external" target="_blank">http://api.bob.com、</a> <a href="http://api.alice.com" rel="external" target="_blank">http://api.alice.com</a>  两个网站。</em></p><br><br><p>Access-Control-Allow-Origin 字段能实现吗？我这边试下，好像不行。</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 13, 2016  4:50 PM">2016年4月13日 16:50</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355628" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用waylau的这条留言" onclick="return CommentQuote('comment-quote-355628','waylau');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-355634" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author"><a title="http://mrsu.me" href="http://mrsu.me" target="_blank" rel="nofollow">mrsu</a></span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355634"><br>            <p>简单请求的 Content-Type 包含 text/plain 而不是 text/html 感觉不科学啊～</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 13, 2016  7:53 PM">2016年4月13日 19:53</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355634" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用mrsu的这条留言" onclick="return CommentQuote('comment-quote-355634','mrsu');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-355684" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">OMEGA</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355684"><br>            <p>简单请求包含connection首部，但是文中指出的不符？</p><br><br><p>（2）HTTP的头信息不超出以下几种字段：<br><br>Accept<br><br>Accept-Language<br><br>Content-Language<br><br>Last-Event-ID<br><br>Content-Type：只限于三个值application/x-www-form-urlencoded、multipart/form-data、text/plain</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 15, 2016 11:49 AM">2016年4月15日 11:49</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355684" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用OMEGA的这条留言" onclick="return CommentQuote('comment-quote-355684','OMEGA');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-355690" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">张歆琳</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355690"><br>            <p>4.2节里有笔误Access-Control-Allow-Headers: true 应该是 Access-Control-Allow-Credentials: true</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 16, 2016 12:00 AM">2016年4月16日 00:00</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355690" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用张歆琳的这条留言" onclick="return CommentQuote('comment-quote-355690','张歆琳');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-355693" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">阮一峰</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355693"><br>            <p>@张歆琳：</p><br><br><p>谢谢指出，已经改正了。</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 16, 2016 11:32 AM">2016年4月16日 11:32</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355693" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用阮一峰的这条留言" onclick="return CommentQuote('comment-quote-355693','阮一峰');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-355736" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">skyer</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355736"><br>            <p>如果浏览器否定了”预检”请求，<br><br>—-<br><br>这个应该是『服务器否定了”预检”请求』吧。</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 18, 2016  6:41 PM">2016年4月18日 18:41</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355736" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用skyer的这条留言" onclick="return CommentQuote('comment-quote-355736','skyer');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-355746" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author"><a title="http://www.onmpw.com" href="http://www.onmpw.com" target="_blank" rel="nofollow">迹忆</a></span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355746"><br>            <p>写的非常好，感谢阮老师的分享</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 19, 2016  1:29 PM">2016年4月19日 13:29</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355746" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用迹忆的这条留言" onclick="return CommentQuote('comment-quote-355746','迹忆');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-355767" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">文刀</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355767"><br>            <p>文章写的非常好，又掌握了一个重要的知识点！感谢阮兄分享</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 20, 2016 11:54 AM">2016年4月20日 11:54</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355767" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用文刀的这条留言" onclick="return CommentQuote('comment-quote-355767','文刀');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-355858" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">Sia</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355858"><br>            <p>有一个问题想请教一下，在淘宝登陆后，打开天猫，会发现也是已登录状态，这是怎么做的呢？</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 24, 2016 10:36 AM">2016年4月24日 10:36</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355858" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用Sia的这条留言" onclick="return CommentQuote('comment-quote-355858','Sia');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-355882" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author"><a title="https://glacjay.info" href="https://glacjay.info" target="_blank" rel="nofollow">GlacJAY</a></span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355882"><br>            <p>4.2 节里面，「服务器回应的其他CORS相关字段如下」中，有个字段写错了吧？写了两次「Allow-Headers」。</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 26, 2016 10:05 AM">2016年4月26日 10:05</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355882" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用GlacJAY的这条留言" onclick="return CommentQuote('comment-quote-355882','GlacJAY');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-355891" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">大头</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-355891"><br>            <p>看阮老师一篇文章，胜读十本书</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 26, 2016  2:57 PM">2016年4月26日 14:57</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-355891" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用大头的这条留言" onclick="return CommentQuote('comment-quote-355891','大头');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-356078" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">二点零</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-356078"><br>            <p>学习了，两篇文章讲得非常详细，感谢</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="May  5, 2016  3:07 PM">2016年5月 5日 15:07</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-356078" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用二点零的这条留言" onclick="return CommentQuote('comment-quote-356078','二点零');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-356124" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">小小的大二学生</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-356124"><br>            <p>还有IE的ActiveXObject</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="May  8, 2016  9:38 PM">2016年5月 8日 21:38</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-356124" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用小小的大二学生的这条留言" onclick="return CommentQuote('comment-quote-356124','小小的大二学生');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-356593" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author"><a title="http://shanshuidan.com" href="http://shanshuidan.com" target="_blank" rel="nofollow">纪广财</a></span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-356593"><br>            <p>受教，谢谢阮老师~</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="May 24, 2016 10:40 PM">2016年5月24日 22:40</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-356593" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用纪广财的这条留言" onclick="return CommentQuote('comment-quote-356593','纪广财');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-356653" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">如理</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-356653"><br>            <blockquote><br><pre>引用大头的发言：</pre><br><br><p>看阮老师一篇文章，胜读十本书</p><br><br></blockquote><br><br><p>你看书只看序的吧？</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="May 26, 2016  5:32 PM">2016年5月26日 17:32</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-356653" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用如理的这条留言" onclick="return CommentQuote('comment-quote-356653','如理');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-357085" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">echo</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-357085"><br>            <blockquote><br><pre>引用光君的发言：</pre><br><br><p>可以可以，老师这篇文章很关键。但是想多问一句CORS在哪些场景下应用比较多？</p><br><br></blockquote><br><br><p>restful api</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="June  3, 2016  5:59 PM">2016年6月 3日 17:59</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-357085" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用echo的这条留言" onclick="return CommentQuote('comment-quote-357085','echo');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-357479" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">quay</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-357479"><br>            <blockquote><br><pre>引用echo的发言：</pre><br><br><p></p><br><br><p>restful api</p><br><br></blockquote><br><br><p>有些疑问：<br><br>1）为啥看到一些公开的API貌似没有origin  <br><br>2）restful api  、 web api 、cors 、web service 目前流行哪个做API呢  <br><br>3） cors IE10才可能，兼容性如何解决呢？</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="June 11, 2016 10:45 PM">2016年6月11日 22:45</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-357479" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用quay的这条留言" onclick="return CommentQuote('comment-quote-357479','quay');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-359398" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">cmxz</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-359398"><br>            <p>关于Credentials，重要的不是会不会发送，而是cookie发送到服务端后如果response header中无Access-Control-Allow-Credentials: true，那么浏览器会报异常，js无法拿到跨域请求的response对象</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="June 19, 2016 12:45 AM">2016年6月19日 00:45</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-359398" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用cmxz的这条留言" onclick="return CommentQuote('comment-quote-359398','cmxz');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-359596" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author"><a title="http://ganxunzou.com" href="http://ganxunzou.com" target="_blank" rel="nofollow">甘训奏</a></span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-359596"><br>            <p>我的请求：<br><br><code>&lt;br /&gt;
$.ajax({&lt;br /&gt;
     type: &quot;POST&quot;,&lt;br /&gt;
     url: &quot;http://192.168.0.103:8081/forum/servlet/HelloServlet&quot;,&lt;br /&gt;
     //contentType:&quot;application/json&quot;,&lt;br /&gt;
     data: {uName:$(&quot;#uName&quot;).val(), uPwd:$(&quot;#uPwd&quot;).val()},&lt;br /&gt;
     dataType: &quot;json&quot;,&lt;br /&gt;
     success: function(data){&lt;br /&gt;
             $(&#39;#resText&#39;).empty();   // 清空resText里面的所有内容&lt;br /&gt;
             var html = &#39;&#39;; &lt;br /&gt;
             $.each(data, function(commentIndex, comment){&lt;br /&gt;
                   html += &#39;&amp;lt;div class=&quot;comment&quot;&gt;&amp;lt;h6&gt;&#39; + comment[&#39;username&#39;]&lt;br /&gt;
                             + &#39;:&amp;lt;/h6&gt;&lt;p /&gt;
                             + &#39;&amp;lt;/p&gt;&amp;lt;/div&gt;&#39;;&lt;br /&gt;
             });&lt;br /&gt;
             $(&#39;#resText&#39;).html(html);&lt;br /&gt;
     }&lt;br /&gt;
});&lt;br /&gt;</code></p><br><br><p>服务端接收到后增加CORS处理。<br><br>```<br><br>response.setContentType(“text/html; charset=utf-8”);<br><br>response.addHeader(“Access-Control-Allow-Origin”, ““);<br><br>response.addHeader(“Access-Control-Allow-Methods”, “<em>“);<br><br>response.addHeader(“Access-Control-Max-Age”, “100”);<br><br>response.addHeader(“Access-Control-Allow-Headers”, “X-Custom-Header,accept, content-type”);<br><br>response.addHeader(“Access-Control-Allow-Credentials”, “false”);<br><br><code>&lt;br /&gt;
&lt;/p&gt;
        &lt;/div&gt;
&lt;div class=&quot;comment-footer&quot;&gt;
&lt;div class=&quot;comment-footer-inner&quot;&gt;
&lt;p&gt;
                   &lt;abbr class=&quot;published&quot; title=&quot;June 22, 2016  1:09 PM&quot;&gt;2016年6月22日 13:09&lt;/abbr&gt;
 | &lt;a href=&quot;http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-359596&quot;&gt;#&lt;/a&gt;
 | &lt;a href=&quot;#comment-text&quot; title=&quot;引用甘训奏的这条留言&quot; onclick=&quot;return CommentQuote(&#39;comment-quote-359596&#39;,&#39;甘训奏&#39;);&quot;&gt;引用&lt;/a&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;



        &lt;div id=&quot;comment-359597&quot; class=&quot;comment&quot;&gt;
    &lt;div  class=&quot;inner&quot;&gt;
        &lt;div class=&quot;comment-header&quot;&gt;
            &lt;div class=&quot;asset-meta&quot;&gt;
&lt;p&gt;
                &lt;span class=&quot;byline&quot;&gt;


                    &lt;span class=&quot;vcard author&quot;&gt;&lt;a title=&quot;http://ganxunzou.com&quot; href=&quot;http://ganxunzou.com&quot; target=&quot;_blank&quot; rel=&quot;nofollow&quot;&gt;甘训奏&lt;/a&gt;&lt;/span&gt;

 说：
                &lt;/span&gt;
&lt;/p&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;comment-content&quot; id=&quot;comment-quote-359597&quot;&gt;
            &lt;p&gt;===========================================&lt;br /&gt;
为什么留言不能超过1200个字，接上一个提问&lt;br /&gt;
===========================================&lt;/p&gt;

&lt;p&gt;不加 `contentType=&quot;application/json&quot;`正常访问后台。增加`contentType=&quot;application/json&quot;`后提示：&lt;br /&gt;</code><br><br>XMLHttpRequest cannot load <a href="http://192.168.0.103:8081/forum/servlet/HelloServlet." rel="external" target="_blank">http://192.168.0.103:8081/forum/servlet/HelloServlet.</a> Response to preflight request doesn’t pass access control check: No ‘Access-Control-Allow-Origin’ header is present on the requested resource. Origin ‘<a href="http://127.0.0.1:8020" target="_blank" rel="external">http://127.0.0.1:8020</a>‘ is therefore not allowed access.<br><br>```<br><br>从错误看，应该是preflight （预检）请求涉及到跨域问题了。现在问题是preflight 的请求响应设置在哪边处理呢？</em></p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="June 22, 2016  1:11 PM">2016年6月22日 13:11</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-359597" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用甘训奏的这条留言" onclick="return CommentQuote('comment-quote-359597','甘训奏');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-359899" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">潘逸飞</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-359899"><br>            <p>写的超赞！</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="June 29, 2016  5:03 PM">2016年6月29日 17:03</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-359899" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用潘逸飞的这条留言" onclick="return CommentQuote('comment-quote-359899','潘逸飞');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-359931" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">赵帅</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-359931"><br>            <p> 阮老师想问你个问题，我目前也是在Cors跨域这块遇到了难题，1.我在复杂请求时，PUT，首先预检通过，可以看到status code:200状态码，2.然后第二次要做真实的修改操作，直接报500状态码，服务器内部错误，响应头里面没有Origin,Headers,Method这三项.请问这是什么情况呢？烦请阮老师帮忙看下。不胜感谢！</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="June 30, 2016  3:16 PM">2016年6月30日 15:16</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-359931" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用赵帅的这条留言" onclick="return CommentQuote('comment-quote-359931','赵帅');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-361155" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">eviltear</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-361155"><br>            <p>想问阮老师，跨协议请求有类似的解决方案吗？如http请求https，谢谢。</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="July 25, 2016 10:53 AM">2016年7月25日 10:53</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-361155" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用eviltear的这条留言" onclick="return CommentQuote('comment-quote-361155','eviltear');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-362889" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">Silas</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-362889"><br>            <p>提一点：<br><br>做auth时，xhr.setRequestHeader，key 不能是 token 字符串。</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="August 22, 2016 11:09 AM">2016年8月22日 11:09</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-362889" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用Silas的这条留言" onclick="return CommentQuote('comment-quote-362889','Silas');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-363624" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">Slimmer</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-363624"><br>            <blockquote><br><pre>引用光君的发言：</pre><br><br><p>可以可以，老师这篇文章很关键。但是想多问一句CORS在哪些场景下应用比较多？</p><br><br></blockquote><br>我们项目目前使用Restful架构，由于前后不在台服务器，处处需跨源<br><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="September  2, 2016  2:05 PM">2016年9月 2日 14:05</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-363624" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用Slimmer的这条留言" onclick="return CommentQuote('comment-quote-363624','Slimmer');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-365284" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">xylsh</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-365284"><br>            <blockquote><br><pre>引用Slimmer的发言：</pre><br><br><p><br><br>我们项目目前使用Restful架构，由于前后不在台服务器，处处需跨源</p><br><br><p><br><br></p></blockquote><br><br><p>我在想，即使不在同一台服务器，如果前台用nginx做请求转发，把不同请求转发到不同服务器，这样，从浏览器的角度来看，域名就没有发生变化，也就不用跨域。我的想法对吗？</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="September 27, 2016  5:42 PM">2016年9月27日 17:42</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-365284" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用xylsh的这条留言" onclick="return CommentQuote('comment-quote-365284','xylsh');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-365885" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">cmxz</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-365885"><br>            <p>Access-Control-Max-Age字段在webkit的浏览器上默认最大时间为5分钟，若设置超过5分钟则不会生效，代码见<a href="https://cs.chromium.org/chromium/src/third_party/WebKit/Source/core/loader/CrossOriginPreflightResultCache.cpp?rcl=1399481969&amp;l=44" target="_blank" rel="external">https://cs.chromium.org/chromium/src/third_party/WebKit/Source/core/loader/CrossOriginPreflightResultCache.cpp?rcl=1399481969&amp;l=44</a><br><br>另外，chrome实际上有bug，即使Access-Control-Max-Age设置为600，下次请求时依然会发送options请求，此bug在2012年被提出，但至今未修复。具体见 <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=131368" rel="external" target="_blank">https://bugs.chromium.org/p/chromium/issues/detail?id=131368</a> </p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="October  8, 2016 11:45 AM">2016年10月 8日 11:45</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-365885" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用cmxz的这条留言" onclick="return CommentQuote('comment-quote-365885','cmxz');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-365887" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">cmxz</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-365887"><br>            <p>可以在<a href="http://test-cors.org/" target="_blank" rel="external">http://test-cors.org/</a> 测试</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="October  8, 2016 11:46 AM">2016年10月 8日 11:46</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-365887" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用cmxz的这条留言" onclick="return CommentQuote('comment-quote-365887','cmxz');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-365976" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">cmxz</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-365976"><br>            <p>我之前的表述可能有问题。</p><br><br><p>经过测试，chrome现阶段（54.0.2840.50 beta-m (64-bit)）是支持对options的请求缓存5分钟的</p><br><br><p>我之前之所以会觉得没有缓存，是因为我原以为preflight-result-cache是以域名为单位的cache，但看了<a href="https://www.w3.org/TR/cors/#preflight-result-cache" target="_blank" rel="external">https://www.w3.org/TR/cors/#preflight-result-cache</a> 后发现cache是以origin+url+credentials+method+header在max-age内cache的，所以不同url（get参数不同也算的）是会发送多次options请求的<br><br></p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="October  9, 2016  3:08 PM">2016年10月 9日 15:08</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-365976" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用cmxz的这条留言" onclick="return CommentQuote('comment-quote-365976','cmxz');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-366050" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author"><a title="http://www.njwangchuan.com" href="http://www.njwangchuan.com" target="_blank" rel="nofollow">第六天魔王</a></span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-366050"><br>            <p>今天正好我女朋友面试，被问到这个问题，我觉得即便是研究生想说透也不是件很容易的事情。</p><br><br><p>我本人实际项目中倒是遇到过跨域问题，一个业务场景是用户上传图片然后切图后再保存，上传图片到第三方存储后（我用的是aws的s3+cloudfront），前端js类库从cdn获取原图时用的是ajax方法。在s3设置cors策略，在cloudfront设置http预检策略，结合阮老师的文章，基本理解到位了，非常感谢！</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="October 10, 2016  2:49 PM">2016年10月10日 14:49</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-366050" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用第六天魔王的这条留言" onclick="return CommentQuote('comment-quote-366050','第六天魔王');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-366448" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">李超</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-366448"><br>            <p>在3.1节中您讲到：</p><br><br><p>&gt; 如果Origin指定的源，不在许可范围内，服务器会返回一个正常的HTTP回应。</p><br><br><p>请问 许可范围 是在什么地方指定的呢？谢谢！</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="October 16, 2016 10:55 AM">2016年10月16日 10:55</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-366448" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用李超的这条留言" onclick="return CommentQuote('comment-quote-366448','李超');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-366750" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">billow</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-366750"><br>            <p>目前为止看到的最深入浅出的解释！</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="October 20, 2016  5:44 PM">2016年10月20日 17:44</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-366750" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用billow的这条留言" onclick="return CommentQuote('comment-quote-366750','billow');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-367818" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">久保与二弦琴</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-367818"><br>            <p>您好，在测试这个问题的时候，发现即便服务器端不设置Access-Control-Allow-Origin头，服务器依然会返回数据，可以用fiddler抓取到，和设置头信息后的区别只是浏览器页面不显示数据而已。能否表明，CORS设置与否只是影响浏览器是否显示服务器返回的数据，而无法阻止服务器要不要返回数据?</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="November  5, 2016  1:24 PM">2016年11月 5日 13:24</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-367818" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用久保与二弦琴的这条留言" onclick="return CommentQuote('comment-quote-367818','久保与二弦琴');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-368637" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">严泽玮</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-368637"><br>            <p>ie8通过XDomainRequest能支持CORS，文中说要不低于ie10，难道我理解错了。</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="November 17, 2016  5:42 PM">2016年11月17日 17:42</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-368637" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用严泽玮的这条留言" onclick="return CommentQuote('comment-quote-368637','严泽玮');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-368652" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">赵启发</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-368652"><br>            <p>“上面说到，CORS请求默认不发送Cookie和HTTP认证信息。如果要把Cookie发到服务器，一方面要服务器同意，指定Access-Control-Allow-Credentials字段。”</p><br><br><p>对于简单请求，其并没有预检请求。也就是说收到服务器响应的时候，简单请求已经发出去了，也就是说简单请求发送的时候不管是带不带cookie，这个决策已经完成了。那么这时候server返回Access-Control-Allow-Credentials字段的意义是什么呢？</p><br><br><p>1. 告诉浏览器其实服务器并没有处理你发送过来的cookie，假设浏览器发了cookie并期待cookie生效以达成某种目的的话，用来帮助定位问题？<br><br>2. 告诉浏览器这个信息，下次再发同样的跨域请求的时候就知道该不该发送cookie了？</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="November 17, 2016  8:52 PM">2016年11月17日 20:52</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-368652" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用赵启发的这条留言" onclick="return CommentQuote('comment-quote-368652','赵启发');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-369470" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">cxl253386709</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-369470"><br>            <p>最近要把web端已有的应用扩展到移动端h5轻应用上，遇到了跨域访问一个诡异的问题。在服务端设置好Access-Control-Allow-Origin： ；Access-Control-Allow-Credentials： “true” 后，两个系统做了cas，然后开发环境一切ok。等到项目准备上线时，打包进weblogic，居然发现访问失效。具体表现是当请求的结果超出一定数据量以后（因为可以指定每页条数，所以可以一点点的加返回数据量，当到了一个临界值以后，突然出现问题，比如30条的时候没事，31条突然就没数据了），从浏览器观察返回的response为空。在weblogic开了debug模式，发现后端一切正常没有任何错误，也确实查了数据库也确实返回了。后来为了验证这个问题，把同一个包又放到tomcat上跑，发现能返回数据量的临界值更小了，同一个包放在本地jetty上就没这个问题。所以我怀疑是不是各个应用服务器在处理跨域返回数据量时有一个默认值，可以配置的？我找了文档却没发现有这个设置。百思不得其解，卡了我好几个周了，求大神解惑！！！<br><br>今天我又做了几个实验，这个限额大约是20k的样子！！</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="November 30, 2016  2:36 PM">2016年11月30日 14:36</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-369470" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用cxl253386709的这条留言" onclick="return CommentQuote('comment-quote-369470','cxl253386709');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-370334" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">lili</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-370334"><br>            <p>大神，有没有cros跨域请求的具体实例呀？我在使用cros跨域上传文件过程中从后台返回的数据前台接收不到，status是0，急用，麻烦您了</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="December 13, 2016  5:35 PM">2016年12月13日 17:35</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-370334" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用lili的这条留言" onclick="return CommentQuote('comment-quote-370334','lili');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-370835" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">DemoorBug</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-370835"><br>            <blockquote><br><pre>引用Silas的发言：</pre><br><br><p>提一点：<br><br>做auth时，xhr.setRequestHeader，key 不能是 token 字符串。</p><br><br></blockquote><br><br><p>我就遇到了这种问题，angular 拦截器设置了  req.headers[‘token’] = ‘’；  跨域就无法通过预检测器，请问有什么方法么，我也设置了<br><br>res.setHeader(‘Access-Control-Allow-Headers’,’token’);<br><br>但还是无法实现</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="December 22, 2016  3:43 PM">2016年12月22日 15:43</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-370835" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用DemoorBug的这条留言" onclick="return CommentQuote('comment-quote-370835','DemoorBug');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-371339" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">夏笛</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-371339"><br>            <p>cors并不是所有浏览器都支持吧，opera mini就是一个例子，现在做这套策略还应该考虑降级问题</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="December 30, 2016  2:50 PM">2016年12月30日 14:50</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-371339" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用夏笛的这条留言" onclick="return CommentQuote('comment-quote-371339','夏笛');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-371606" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author"><a title="http://www.codesec.net/view/154574.html" href="http://www.codesec.net/view/154574.html" target="_blank" rel="nofollow">arkin</a></span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-371606"><br>            <p>Access-Control-Max-Age 在chrome控制台注意有disabled cache的选项,<br><br>不然会被坑,我调了很久也不生效,信好网上看到.提醒一下大家.</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="January  4, 2017  5:54 PM">2017年1月 4日 17:54</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-371606" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用arkin的这条留言" onclick="return CommentQuote('comment-quote-371606','arkin');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-371805" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">和珅</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-371805"><br>            <p>Access-Control-Request-Method  这个方法是告诉服务端我将要用什么方法请求数据，而不是方法的罗列。<br><br>补充withCredentials = true; 设置Access-Control-Allow-Credentials = true的同时Access-Control-Allow-Origin的值不能为“<em>”，必须设置一个完整的域，只允许一条。</em></p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="January  9, 2017 10:02 AM">2017年1月 9日 10:02</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-371805" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用和珅的这条留言" onclick="return CommentQuote('comment-quote-371805','和珅');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-372585" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">bsc2xp</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-372585"><br>            <blockquote><br><pre>引用cmxz的发言：</pre><br><br><p>关于Credentials，重要的不是会不会发送，而是cookie发送到服务端后如果response header中无Access-Control-Allow-Credentials: true，那么浏览器会报异常，js无法拿到跨域请求的response对象</p><br><br></blockquote><br><br><p>这么解释看得才明白，文章里说的没理解</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="February  9, 2017  9:21 AM">2017年2月 9日 09:21</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-372585" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用bsc2xp的这条留言" onclick="return CommentQuote('comment-quote-372585','bsc2xp');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-373225" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">leaf</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-373225"><br>            <blockquote><br><pre>引用quay的发言：</pre><br><br><p></p><br><br><p>有些疑问：<br><br>1）为啥看到一些公开的API貌似没有origin<br><br>2）restful api、 web api 、cors 、web service 目前流行哪个做API呢<br><br>3） cors IE10才可能，兼容性如何解决呢？</p><br><br></blockquote><br><br><p>1）应该是那些应用有一个后台服务器，后台服务器调用的API<br><br>2）restful api 是 web api 中的一种吧  <br><br>   cors 只要浏览器 xhr 跨域请求都要面对的问题，和什么形式 api 无关  <br><br>   web service 是很早之前的技术，现在应该是不流行了  <br><br>3）JSONP</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="February 21, 2017  4:31 PM">2017年2月21日 16:31</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-373225" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用leaf的这条留言" onclick="return CommentQuote('comment-quote-373225','leaf');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-373347" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">茉莉</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-373347"><br>            <blockquote><br><pre>引用Sia的发言：</pre><br><br><p>有一个问题想请教一下，在淘宝登陆后，打开天猫，会发现也是已登录状态，这是怎么做的呢？</p><br><br></blockquote><br><br><p>自己感觉是用同一个数据库吧 起码是用户表 订单表 之类的 通用的会有关联</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="February 23, 2017  6:19 PM">2017年2月23日 18:19</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-373347" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用茉莉的这条留言" onclick="return CommentQuote('comment-quote-373347','茉莉');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-373357" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author"><a title="http://lx15.github.io" href="http://lx15.github.io" target="_blank" rel="nofollow">刘欣（Lx15）</a></span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-373357"><br>            <p>阮老师您好，我测试了一下。。。。在前后端分离的情况下，前端发put的非简单请求，并不能够跨源，这是为什么呢？ 后端采用node 接收请求。 <br><br>在前后端不分离的情况下，前端发put的非简单请求，是可以跨源的。</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="February 24, 2017 11:43 AM">2017年2月24日 11:43</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-373357" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用刘欣（Lx15）的这条留言" onclick="return CommentQuote('comment-quote-373357','刘欣（Lx15）');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-373377" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">吴宏伟</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-373377"><br>            <blockquote><br><pre>引用杨铮的发言：</pre><br><br><p>asp.net web api 中的坑。<br><br>web.config 中 remove name=”OPTIONSVerbHandler” 需要去掉。</p><br><br></blockquote><br><br><p>还真碰到这个坑了。</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="February 24, 2017  7:58 PM">2017年2月24日 19:58</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-373377" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用吴宏伟的这条留言" onclick="return CommentQuote('comment-quote-373377','吴宏伟');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-373470" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author"><a title="https://github.com/Leesson" href="https://github.com/Leesson" target="_blank" rel="nofollow">Leesson</a></span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-373470"><br>            <p>感谢，介绍的很详细。<br><br>另外请问，如果返回头里包含两个Access-Control-Allow-Origin符合规范吗？比如返回头同时包含如下两个：<br><br>Access-Control-Allow-Origin：www.origin.com  //(请求发出域名)<br><br>Access-Control-Allow-Origin：</p><br><br><p>在实际中遇上过上述问题，后台代码和IIS分别为返回头添加了Access-Control-Allow-Origin。当请求发出域名和接收域名（后台）是同一域名时可正常得到结果，但不是统一域名时就会报跨域错误。<br><br>阮老师能帮忙解释一下吗？谢谢</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="February 27, 2017 12:23 AM">2017年2月27日 00:23</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-373470" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用Leesson的这条留言" onclick="return CommentQuote('comment-quote-373470','Leesson');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-375699" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">Ryan</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-375699"><br>            <p>看文章的说法，浏览器决定是否跨域，那么服务端呢？简单的跨域，浏览器带着cookie请求服务器，服务器设置false，则不接收cookie？事实上cookie已经加载到request里了。<br><br>第二个问题，简单的跨域中，如果服务端部允许跨域，那么服务端是直接返回空还是按照正常的逻辑返回了数据，只是到浏览器的时候被浏览器给拦截了？</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="March 30, 2017 11:31 PM">2017年3月30日 23:31</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-375699" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用Ryan的这条留言" onclick="return CommentQuote('comment-quote-375699','Ryan');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-375717" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author"><a title="http://www.yxsss.com" href="http://www.yxsss.com" target="_blank" rel="nofollow">vic</a></span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-375717"><br>            <p>@Ryan：</p><br><br><p>肯定啊 都是浏览器，如果不是浏览器 就不存在这个问题 比如服务器端程序 想请求谁就请求谁 ， </p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="March 31, 2017 11:16 AM">2017年3月31日 11:16</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-375717" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用vic的这条留言" onclick="return CommentQuote('comment-quote-375717','vic');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-375727" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">ouyang</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-375727"><br>            <p>预检结果<br><br>Response Headers<br><br>      Allow:GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS, PATCH<br><br>      Content-Length:0<br><br>      Date:Fri, 31 Mar 2017 06:12:56 GMT<br><br>Request Headers<br><br>       Accept:<em>/</em><br><br>       Accept-Encoding:gzip, deflate, sdch<br><br>       Accept-Language:zh-CN,zh;q=0.8<br><br>       Access-Control-Request-Headers:authorization<br><br>       Access-Control-Request-Method:POST<br><br>       Connection:keep-alive<br><br>       Host:10.220.17.121:8080<br><br>       Origin:<a href="http://10.220.18.113:8020" target="_blank" rel="external">http://10.220.18.113:8020</a><br><br>       Referer:<a href="http://10.220.18.113:8020/xb/wx/201703013/login.html" target="_blank" rel="external">http://10.220.18.113:8020/xb/wx/201703013/login.html</a><br><br>       User-Agent:Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Mobile Safari/537.36<br><br>      如何让浏览器通过Origin呢   怎么设置？<br><br></p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="March 31, 2017  2:20 PM">2017年3月31日 14:20</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-375727" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用ouyang的这条留言" onclick="return CommentQuote('comment-quote-375727','ouyang');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-375973" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">龙顺</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-375973"><br>            <p>我只能说，相见恨晚呐！看了几篇阮老师的博客下来，发现内容讲解都非常细致，很难找到比阮老师的更适合初学者的教程了。</p><br><br><p>关于JSONP，“JSONP的优势在于支持老式浏览器，以及可以向不支持CORS的网站请求数据”。支持老式浏览器是确实是其优势，但像不支持CORS的网站请求数据，我觉得就不是它的优势了，因为后端代码还是得针对JSONP做出相应的调整（返回json字符串的部分需要用传过去的回调函数名包起来），也很麻烦。反而CORS的方式，只需要在后端代码的过滤器上加上相应的响应头就行了，来得更方便。</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April  7, 2017 12:19 AM">2017年4月 7日 00:19</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-375973" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用龙顺的这条留言" onclick="return CommentQuote('comment-quote-375973','龙顺');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-376224" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">gorden</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-376224"><br>            <p>阮老师，感谢您的文章。现在有一些不明白的地方希望跟你请教一下：<br><br>服务器对于预检请求和实际请求是需要用不同的方法去拦截吗？还是这两个请求都是由同一个方法去处理的</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="April 12, 2017 11:34 PM">2017年4月12日 23:34</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-376224" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用gorden的这条留言" onclick="return CommentQuote('comment-quote-376224','gorden');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-376850" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author"><a title="http://www.708luo.com" href="http://www.708luo.com" target="_blank" rel="nofollow">赵启发</a></span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-376850"><br>            <p><br><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS" rel="external" target="_blank">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS</a></p><br><br><p>这里找到答案了：<br><br>“因为这是一个简单 GET 请求，所以浏览器不会对其发起“预检请求”。但是，如果服务器端的响应中未携带 Access-Control-Allow-Credentials: true ，浏览器将不会把响应内容返回给请求的发送者。”</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="May  3, 2017  4:16 PM">2017年5月 3日 16:16</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-376850" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用赵启发的这条留言" onclick="return CommentQuote('comment-quote-376850','赵启发');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-376856" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author"><a title="http://jackzong.github.io" href="http://jackzong.github.io" target="_blank" rel="nofollow">j.zong</a></span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-376856"><br>            <p>阮老师，3.1节中，【如果Origin指定的源，不在许可范围内，服务器会返回一个正常的HTTP回应。浏览器发现，这个回应的头信息没有包含Access-Control-Allow-Origin字段】，这句话有误吧？如果Origin源不在指定的许可范围内，回应的头信息也会包含Access-Control-Allow-Origin字段吧，只是它的值与Origin源不匹配，就会执行onerror错误事件驱动程序</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="May  3, 2017  9:18 PM">2017年5月 3日 21:18</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-376856" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用j.zong的这条留言" onclick="return CommentQuote('comment-quote-376856','j.zong');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-377004" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">龙海洋</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-377004"><br>            <p>一个post跨域请求在“预检”请求OPTIONS中Origin为什么会为null，并且会报错：</p><br><br><p>Response to preflight request doesn’t pass access control check: No ‘Access-Control-Allow-Origin’ header is present on the requested resource. Origin ‘null’ is therefore not allowed access. The response had HTTP status code 401.</p><br><br><p>OPTIONS请求http头部信息如下：</p><br><br><p>Accept:<em>/</em><br><br>Accept-Encoding:gzip, deflate, sdch, br<br><br>Accept-Language:zh-CN,zh;q=0.8<br><br>Access-Control-Request-Headers:authorization<br><br>Access-Control-Request-Method:POST<br><br>Connection:keep-alive<br><br>Host:chinapopin.com<br><br>Origin:null<br><br>User-Agent:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.96 Safari/537.36</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="May 10, 2017 10:08 AM">2017年5月10日 10:08</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-377004" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用龙海洋的这条留言" onclick="return CommentQuote('comment-quote-377004','龙海洋');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-377208" class="comment"><br>    <div class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">syd_2011</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-377208"><br>            <blockquote><br><pre>引用严泽玮的发言：</pre><br><br><p>ie8通过XDomainRequest能支持CORS，文中说要不低于ie10，难道我理解错了。</p><br><br></blockquote><br><br><p>xDomainRequest 只支持post,get 不给带cookie等等  大多数情况下等于没什么用</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="May 16, 2017  7:11 PM">2017年5月16日 19:11</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-377208" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用syd_2011的这条留言" onclick="return CommentQuote('comment-quote-377208','syd_2011');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br><br><br>        <div id="comment-377611" class="comment"><br>    <div id="comment-last" class="inner"><br>        <div class="comment-header"><br>            <div class="asset-meta"><br><p><br>                <span class="byline"><br><br><br>                    <span class="vcard author">阿豪</span><br><br> 说：<br>                </span><br></p><br>            </div><br>        </div><br>        <div class="comment-content" id="comment-quote-377611"><br>            <p>厉害了  阮老师，收获很多</p><br>        </div><br><div class="comment-footer"><br><div class="comment-footer-inner"><br><p><br>                   <abbr class="published" title="June  1, 2017  9:48 AM">2017年6月 1日 09:48</abbr><br> | <a href="http://www.ruanyifeng.com/blog/2016/04/cors.html#comment-377611" target="_blank" rel="external">#</a><br> | <a href="#comment-text" title="引用阿豪的这条留言" onclick="return CommentQuote('comment-quote-377611','阿豪');">引用</a><br></p><br></div><br></div><br>    </div><br></div><br><br>    </div><br><br><br><br><br><br><br>    <div class="comments-open" id="comments-open"><br>        <h2 class="comments-open-header">我要发表看法</h2><br>        <div class="comments-open-content"><br><br><br>            <div id="comment-greeting"></div><br><br>            <form method="post" action="http://www.ruanyifeng.com/cgi-bin/mtos/mt-comments.cgi" name="comments_form" id="comments-form" onsubmit="return pleaseWait();"><br>                <input type="hidden" name="static" value="1"><br>                <input type="hidden" name="entry_id" value="1885"><br>                <input type="hidden" name="__lang" value="en"><br>                <input type="hidden" name="parent_id" value="" id="comment-parent-id"><br>                <input type="hidden" name="armor" value="1"><br>                <input type="hidden" name="preview" value=""><br>                <input type="hidden" name="sid" value=""><br>                <div id="comments-open-data"><br>            <div id="comments-open-text"><br>                    <p><label for="comment-text">您的留言<br>                    （HTML标签部分可用）</label></p><br>                    <p><textarea id="comment-text" name="text" rows="10" cols="50"></textarea></p><br>                </div><br>                    <div id="comment-form-name"><br>                        <p><label for="comment-author">您的大名：</label></p><br>                        <p><input id="comment-author" name="author" size="30" value="">  <span class="hint"> &laquo;-必填</span></p><br>                    </div><br>                    <div id="comment-form-email"><br>                        <p><label for="comment-email">电子邮件：</label></p><br>                        <p><input id="comment-email" name="email" size="30" value="">  <span class="hint"> &laquo;-必填，不公开</span></p><br>                    </div><br>                    <div id="comment-form-url"><br>                        <p><label for="comment-url">个人网址：</label></p><br>                        <p><input id="comment-url" name="url" size="30" value="">  <span class="hint"> &laquo;-我信任你，不会填写广告链接</span></p><br>                    </div><br>                    <div id="comment-form-remember-me"><br>                        <p><br>                        <label for="comment-bake-cookie">记住个人信息？</label><input type="checkbox" id="comment-bake-cookie" name="bakecookie" onclick="!this.checked?forgetMe(document.comments_form):rememberMe(document.comments_form)" value="1" accesskey="r"></p><br>                    </div><br>                </div><br>                    <div id="comment-form-reply" style="display:none"><br>                    <input type="checkbox" id="comment-reply" name="comment_reply" value="" onclick="mtSetCommentParentID()"><br>                    <label for="comment-reply" id="comment-reply-label"></label><br>                </div><br>                <div id="comments-open-captcha"></div><br>                <div id="comments-open-footer"><br><div id="wait" style="display:none;"><br><p><strong>正在发表您的评论，请稍候</strong></p><br><p><br><input type="text" name="percent" size="3" style="font-family:Arial; color:black;text-align:center; border-width:medium; border-style:none;"><br><input type="text" name="chart" size="46" style="font-family:Arial;font-weight:bolder; color:black; padding:0px; border-style:none;"><br></p><br></div><br><br>                    <p><input type="submit" accesskey="s" name="post" id="comment-submit" value="发表">  <span class="hint"> &laquo;- 点击按钮</span></p><br>                </div><br>            </form><br><br><br>        </div><br>    </div><br><br><br><br><br></div><br><br><br><br><br>                        <br>                    <br><br>                <br>            <br>        <script type="text/javascript" src="http://www.ruanyifeng.com/blog/js/prism.js"></script><br><br>            <div id="footer"><br>    <div id="footer-inner"><br>        <div id="footer-content"><br><p><a href="/contact.html">联系方式</a> | 2003 - 2017<br><br><script><br>  (function(i,s,o,g,r,a,m){i[‘GoogleAnalyticsObject’]=r;i[r]=i[r]||function(){<br>  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),<br>  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)<br>  })(window,document,’script’,’//www.google-analytics.com/analytics.js’,’ga’);<br><br>  ga(‘create’, ‘UA-46829782-1’, ‘ruanyifeng.com’);<br>  ga(‘send’, ‘pageview’);<br><br></script><br><br><br><br><!-- Site Meter --><br><a href="http://sm3.sitemeter.com/stats.asp?site=sm3bomoocom" target="_top"><br><img src="http://sm3.sitemeter.com/meter.asp?site=sm3bomoocom" alt="Site Meter" border="0"></a><br><br><!-- Copyright (c)2009 Site Meter --><br><br></p><br><br>        </div><br>    </div><br></div><br><br><br><div id="share_button_proto" style="display:none;"><br><a class="bshareDiv" href="http://www.bshare.cn/share" target="_blank" rel="external">分享按钮</a><br><br><br><br><script type="text/javascript" charset="utf-8" src="http://static.bshare.cn/b/buttonLite.js#uuid=15e016b4-0028-44f1-a40d-a3c9d9c13c28&style=10&bgcolor=#fff&bp=facebook,twitter,sinaminiblog,weixin,gplus,qqmb,qzone,douban,qqim,fanfou,instapaper,xueqiu&ssc=false"></script><br><script type="text/javascript" charset="utf-8"><br>bShare.addEntry({<br>    title: document.getElementById(“page-title”).innerHTML,<br>url:window.location.href<br>});<br></script><br></div><br><br><script><br>document.getElementById(“share_button”).innerHTML=document.getElementById(“share_button_proto”).innerHTML;<br></script><br><br><br><br><br>        <br>    <br></body><br></html>
        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Theme By <a target="_blank" href="https://github.com/levblanc">Levblanc.</a>
          Inspired By <a target="_blank" href="https://github.com/klugjo/hexo-theme-clean-blog">Clean Blog.</a>
        <p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>
		<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

